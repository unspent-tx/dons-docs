import { addVKeyWitnessSetToTransaction } from "../../src/utils/witness-set";

describe("Witness Set", () => {
  it("should append witness set vkeys correctly", () => {
    const tx =
      "84a40081825820ad91133a2c769247d384c0519206766e755b50847b41504b8555932917e492a90201818258390004845038ee499ee8bc0afe56f688f27b2dd76f230d3698a9afcc1b66e0464447c1f51adaefe1ebfb0dd485a349a70479ced1d198cbdf7fe71a38c5ed05021a00028b21075820bdaa99eb158414dea0a91d6c727e2268574b23efe6e08ab3b841abe8059a030ca0f5d90103a0";
    const signature =
      "a1008182582089f4b576f05f5aad99bce0bdd51afe48529772f7561bb2ac9d84a4afbda1ecd658402702ebaab96e33259eacc175edffcf5b74cdb2bc28d8bf0a99e5c3bb4999597828470aa46ea6baf2d3234efc11e81bb7907a992a0ff97c94725e4fe290eef006";

    const newTx = addVKeyWitnessSetToTransaction(tx, signature);
    expect(newTx).toEqual(
      "84a40081825820ad91133a2c769247d384c0519206766e755b50847b41504b8555932917e492a90201818258390004845038ee499ee8bc0afe56f688f27b2dd76f230d3698a9afcc1b66e0464447c1f51adaefe1ebfb0dd485a349a70479ced1d198cbdf7fe71a38c5ed05021a00028b21075820bdaa99eb158414dea0a91d6c727e2268574b23efe6e08ab3b841abe8059a030ca1008182582089f4b576f05f5aad99bce0bdd51afe48529772f7561bb2ac9d84a4afbda1ecd658402702ebaab96e33259eacc175edffcf5b74cdb2bc28d8bf0a99e5c3bb4999597828470aa46ea6baf2d3234efc11e81bb7907a992a0ff97c94725e4fe290eef006f5d90103a0",
    );
  });
});
